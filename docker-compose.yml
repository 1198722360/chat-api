version: '3'
services:
  new-api:
    build:
      context: .
      dockerfile: Dockerfile
    image: new-api
    restart: always
    network_mode: host
    ports:
      - "3000:3000"
    environment:
      - TZ=Asia/Shanghai
      - REDIS_CONN_STRING=redis://default:luxl1379@localhost:6379
      - SQL_DSN=oneapi:sTCDH4SWeNTtKF3T@tcp(localhost:3306)/oneapi
      - SYNC_FREQUENCY=60
      - CHANNEL_UPDATE_FREQUENCY=1440
      - GLOBAL_API_RATE_LIMIT=180
      - GLOBAL_WEB_RATE_LIMIT=60
    volumes:
      - /data/one-api1:/data
